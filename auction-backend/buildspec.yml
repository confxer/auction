version: 0.2

phases:
  install:
    runtime-versions:
      java: corretto17
    commands:
      - cd auction-backend
      - echo "Entered auction-backend directory. Current path is $(pwd)"

  build:
    commands:
      - echo "Granting execute permission to gradlew"
      - chmod +x ./gradlew
      - echo "Building the Spring Boot application"
      - ./gradlew build -x test

  post_build:
    commands:
      - echo "Renaming the executable jar file to app.jar"
      - mv $(find build/libs -name '*.jar' ! -name '*-plain.jar') build/libs/app.jar

artifacts:
  base-directory: 'auction-backend'
  files:
    - 'build/libs/app.jar'
    - 'appspec.yml'
    - 'scripts/**/*'
#?안돼 왜